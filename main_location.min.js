!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var highlight=function(doc){this.doc=doc};highlight.prototype.getTitle=function(){return this.doc.querySelector(".a-spacing-top-small.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-spacing-none.a-spacing-top-micro").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],2:[function(require,module,exports){var highlightFormatter=function(){var Highlight,util=require("./util"),ua=navigator.userAgent;Highlight=require(ua.indexOf("iPhone")>0||ua.indexOf("iPod")>0||ua.indexOf("Android")>0&&ua.indexOf("Mobile")>0?"./highlight_sp":"./highlight"),util.defineInnerTextForFirefox(),this.highlight=new Highlight(document),this.highlight_html=[]};highlightFormatter.prototype.output=function(option){null==option&&(option={}),this.outputBookInfo(),this.outputHighlightInfo(option),this.outputExecute()},highlightFormatter.prototype.outputExecute=function(){document.title=this.highlight.getTitle(),document.body.removeAttribute("class"),document.body.style.fontFamily="arial,sans-serif",document.body.style.fontSize=".75em",document.body.style.color="#333",document.body.style.lineHeight="1.5em",document.body.innerHTML=this.highlight_html.join("")},highlightFormatter.prototype.outputBookInfo=function(){this.highlight_html.push('<div class="book_info">'),this.highlight_html.push('<span class="title">'+this.highlight.getTitle()+"</span><br />"),this.highlight_html.push('<span class="author">by '+this.highlight.getAuthor()+"</span>"),this.highlight_html.push("</div>")},highlightFormatter.prototype.outputHighlightInfoBase=function(callback){this.highlight_html.push('<div class="highlights">'),callback(),this.highlight_html.push("</div>")},highlightFormatter.prototype.outputHighlightInfo=function(option){var that=this;this.outputHighlightInfoBase(function(){for(var i=0,len=that.highlight.getHighlightLength();i<len;i++){var highlight=that.highlight.getHighlightTags()[i];if(highlight){if(that.highlight_html.push("<hr />"),that.highlight_html.push("<p>"+highlight.innerText+"</p>"),!0===option.with_location){var locationNo=that.highlight.getLocationTags()[i].innerText.match(/\d+(,?)(\d+)?/)[0].replace(/,/,"");that.highlight_html.push('<p><a href="kindle://book?action=open&asin='+that.highlight.getAsin()+"&location="+locationNo+'">Read more at location '+locationNo+"</a></p>")}if(!0===option.with_memo){var memo=that.highlight.getMemoTags()[i].innerText;""!=memo&&that.highlight_html.push("<p>Note: "+memo+"</p>")}}}})},module.exports=highlightFormatter},{"./highlight":1,"./highlight_sp":3,"./util":5}],3:[function(require,module,exports){var highlight=function(doc){this.doc=doc};highlight.prototype.getTitle=function(){return this.doc.querySelector("h3.a-spacing-top-mini.a-color-base").innerText},highlight.prototype.getAuthor=function(){return this.doc.querySelector(".a-size-small.a-color-secondary").innerText},highlight.prototype.getHighlightTags=function(){return this.doc.querySelectorAll("#highlight")},highlight.prototype.getLocationTags=function(){return this.doc.querySelectorAll("#annotationHighlightHeader")},highlight.prototype.getMemoTags=function(){return this.doc.querySelectorAll("#note")},highlight.prototype.getHighlightLength=function(){return parseInt(this.doc.querySelector("#kp-notebook-highlights-count").innerText)},highlight.prototype.getAsin=function(){return document.querySelector("#kp-notebook-annotations-asin").value},module.exports=highlight},{}],4:[function(require,module,exports){!function(d){"use strict";(new(require("./highlightFormatter"))).output({with_location:!0,with_memo:!0})}(document)},{"./highlightFormatter":2}],5:[function(require,module,exports){var util={defineInnerTextForFirefox:function(){void 0==document.createElement("div").innerText&&Object.defineProperty(HTMLElement.prototype,"innerText",{get:function(){return this.textContent},set:function(v){this.textContent=v}})}};module.exports=util},{}]},{},[4]);
